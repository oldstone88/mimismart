/*
{
  desc:"Скрипт для пульта DAIKIN ARC466A9",
  tag:"import-script",
  target:"IRT",
  selectArea:true,
  addItems:[
    {tag:"item", id:"%TARGET%", name:"NAME", "sub-id":"%SUBID%", type:"conditioner", "t-delta":"14", "t-min":"18", "vane-hor":"0x60", "vane-ver":"0x41"},
  ],
  vars:[
 {name:"IRT",type:"devices-list",required:true,filter:["ir-transmitter"],desc:"ИК-передатчик"},
 {name:"NAME",type:"string",required:true,min:3,max:40,desc:"Имя кондиционера",defaultValue:"Кондиционер"},
 {name:"Cond",type:"hidden",value:"%TARGET%:%SUBID%"}
  ]
}
*/

// Mar 26 2014 12:39:23 - 105 byte
// Jul  4 2014 12:36:37 - 105 byte
// Apr 30 2015 16:16:46 - 93 byte !

// dry only fanA
// 80 byte temp
// 92 byte crc? +temp +fan +vanes
// 79 byte F0 mode
// 82 byte F0 fan
// 83 byte 0F vane hor F-vane,0-off
// 82 byte 0F vane ver F-vane,0-off
// 79 byte 0F onoff 8/9

// if mode=fan then 80 byte = 0x32
// if mode=dry then 80 byte = 0xC0

u8 modes [] = {6,3,2,4,0};
u8 fans [] = {10,3,5,7};

V-ID/Cond{
	u8 mas [] = {0x196408000200C1060101100000030510810D000102807D8E100451034010810D11DA2700C51000E70102809730100451034010810D11DA2700420010640102809630100451039810810D11DA270000382600A0000006600000C18000B7};
	u8 mode = opt(0)>>4;
	u8 onoff = opt(0)&1;
	u8 fan = opt(4);
	u8 VaneVer = opt(3)>>4;
	u8 VaneHor = opt(3)&0x0F;
	mas[79] = (modes[mode]<<4) | (onoff ? 9:8); //mode,onoff
	if(!mode)			mas[80] = 0x32;
	else if(mode == 2)	mas[80] = 0xC0;
	else 				mas[80] = (opt(1)+18)*2; //temp
	mas[82] = (fans[fan]<<4) | (VaneVer ? 15 : 0); //fan,vv
	mas[83] = VaneHor ? 15 : 0; //vh
	mas[92] = 0xB9 + mas[79] + mas[80] + mas[82] + mas[83];
	setStatus(IRT,mas);
}

V-ID/IRT{
	u8 res[210]="";
    u8 *st = opt;
    for(u8 i = 0; i < optl; ++i){
        sprintf(res+strlen(res), "%.2X", st[i]);
    }
    sprintf(res+strlen(res), "\10");
    srvError(&res);
}

// cool fanA 19 196408000200C1060101100000030510810D000102807D8E100451034010810D11DA2700C51000E70102809730100451034010810D11DA2700420010640102809630100451039810810D11DA270000382600A0000006600000C18000B7
// cool fanA 20 196408000200C1060101100000030510810D000102807D8E100351034010810D11DA2700C51000E70102809630100351034010810D11DA2700420010640102809630100351039810810D11DA270000382800A0000006600000C18000B9
// cool fanA 21 196408000200C1060101100000030510810D000102807D8E100351034010810D11DA2700C51000E70102809730100351034010810D11DA2700420010640102809730100351039810810D11DA270000382A00A0000006600000C18000BB
// cool fanA 22 196408000200C1060101100000030510810D000102807D8E100351034010810D11DA2700C51000E70102809730100351034010810D11DA2700420010640102809630100351039810810D11DA270000382C00A0000006600000C18000BD
// cool fanA 23 196408000200C1060101100000030510810D000102807D8E100451034010810D11DA2700C51000E70102809730100351034010810D11DA2700420010640102809730100351039810810D11DA270000382E00A0000006600000C18000BF
// cool fanA 24 196408000200C1060101100000030510810D000102807D8E100351034010810D11DA2700C51000E70102809730100351034010810D11DA2700420010640102809630100451039810810D11DA270000383000A0000006600000C18000C1
// cool fanA 25 196408000200C1060101100000030510810D000102807D8E100351034010810D11DA2700C51000E70102809630100351034010810D11DA2700420010640102809630100351039810810D11DA270000383200A0000006600000C18000C3
// cool fanA 26 196408000200C1060101100000030510810D000102807D8E100351034010810D11DA2700C51000E70102809630100251034010810D11DA2700420010640102809730100351039810810D11DA270000383400A0000006600000C18000C5
// cool fanA 27 196408000200C0060101100000030510810D000102807D8E100251034010810D11DA2700C51000E70102809730100351034010810D11DA2700420010640102809730100351039810810D11DA270000383600A0000006600000C18000C7
// cool fanA 28 196408000200C1060101100000030510810D000102807D8E100351034010810D11DA2700C51000E70102809630100251034010810D11DA2700420010640102809630100351039810810D11DA270000383800A0000006600000C18000C9
// cool fanA 29 196408000200C0060101100000030510810D000102807D8E100351034010810D11DA2700C51000E70102809730100351034010810D11DA2700420010640102809730100251039810810D11DA270000383A00A0000006600000C18000CB
// cool fanA 30 196408000200C0060101100000030510810D000102807D8E100351034010810D11DA2700C51000E70102809730100351034010810D11DA2700420010640102809730100251039810810D11DA270000383C00A0000006600000C18000CD
// cool fanA 31 196408000200C1060101100000030510810D000102807D8E100351034010810D11DA2700C51000E70102809630100451034010810D11DA2700420110650102809630100451039810810D11DA270000383E00A0000006600000C18000CF
// cool fanA 32 196408000200C1060101100000030510810D000102807D8E100251034010810D11DA2700C51000E70102809630100351034010810D11DA2700420110650102809630100351039810810D11DA270000384000A0000006600000C18000D1
// heat fanA 20 196408000200C1060101100000030510810D000102807E8E100351034010810D11DA2700C51000E70102809830100451034010810D11DA2700421210760102809830100451039810810D11DA270000482800A0000006600000C18000C9
// fan  fanA -- 196408000200C1060101100000030510810D000102807E8E100451034010810D11DA2700C51000E70102809830100351034010810D11DA2700421210760102809830100351039810810D11DA270000683200A0000006600000C18000F3
// auto fanA 20 196408000200C1060101100000030510810D000102807E8E100451034010810D11DA2700C51000E70102809830100451034010810D11DA2700421210760102809830100351039810810D11DA270000082800A0000006600000C1800089
// dry  fanA -- 196408000200C1060101100000030510810D000102807E8E100451034010810D11DA2700C51000E70102809830100351034010810D11DA2700421210760102809830100351039810810D11DA27000028C000A0000006600000C1800041
// cool fanA 20 196408000200C1060101100000030510810D000102807E8E100351034010810D11DA2700C51000E70102809830100351034010810D11DA2700421210760102809830100351039810810D11DA270000382800A0000006600000C18000B9
// cool fanA 20 196408000200C1060101100000030510810D000102807F8E100351034010810D11DA2700C51000E70102809A30100451034010810D11DA2700420110650102809A30100351039810810D11DA270000382800A0000006600000C18000B9
// cool fan1 20 196408000200C1060101100000030510810D000102807F8E100451034010810D11DA2700C51000E70102809A30100251034010810D11DA2700420110650102809A30100351039810810D11DA27000038280030000006600000C1800049
// cool fan2 20 196408000200C1060101100000030510810D000102807F8E100351034010810D11DA2700C51000E70102809A30100351034010810D11DA2700420110650102809A30100451039810810D11DA27000038280040000006600000C1800059
// cool fan3 20 196408000200C1060101100000030510810D000102807F8E100451034010810D11DA2700C51000E70102809A30100451034010810D11DA2700420110650102809A30100451039810810D11DA27000038280050000006600000C1800069
// cool fan4 20 196408000200C1060101100000030510810D000102807F8E100351034010810D11DA2700C51000E70102809A30100451034010810D11DA2700420110650102809A30100251039810810D11DA27000038280060000006600000C1800079
// cool fan5 20 196408000200C1060101100000030510810D000102807F8E100351034010810D11DA2700C51000E70102809A30100351034010810D11DA2700420110650102809A30100351039810810D11DA27000038280070000006600000C1800089
// heat fanA 20 196408000200BF060101100000030510810D00010280808E100351034010810D11DA2700C51000E70102809B30100351034010810D11DA2700420110650102809B30100451039810810D11DA270000482800A0000006600000C18000C9
// heat fan1 20 196408000200C1060101100000030510810D00010280808E100451034010810D11DA2700C51000E70102809B30100451034010810D11DA2700420210660102809B30100351039810810D11DA27000048280030000006600000C1800059
// heat fan2 20 196408000200C1060101100000030510810D00010280808E100451034010810D11DA2700C51000E70102809B30100351034010810D11DA2700420210660102809B30100451039810810D11DA27000048280040000006600000C1800069
// heat fan3 20 196408000200C1060101100000030510810D00010280808E100351034010810D11DA2700C51000E70102809B30100351034010810D11DA2700420210660102809B30100351039810810D11DA27000048280050000006600000C1800079
// heat fan4 20 196408000200C1060101100000030510810D00010280808E100351034010810D11DA2700C51000E70102809B30100351034010810D11DA2700420210660102809B30100351039810810D11DA27000048280060000006600000C1800089
// heat fan5 20 196408000200C1060101100000030510810D00010280808E100351034010810D11DA2700C51000E70102809B30100351034010810D11DA2700420210660102809B30100351039810810D11DA27000048280070000006600000C1800099
// cool fan5 20
// vh -- 196408000200C1060101100000030510810D00010280808E100451034010810D11DA2700C51000E70102809A30100451034010810D11DA2700420110650102809A30100451039810810D11DA270000382800700F0006600000C1800098
// -- -- 196408000200C0060101100000030510810D00010280808E100451034010810D11DA2700C51000E70102809A30100451034010810D11DA2700420110650102809A30100351039810810D11DA27000038280070000006600000C1800089
// vh -- 196408000200C1060101100000030510810D00010280808E100451034010810D11DA2700C51000E70102809A30100451034010810D11DA2700420110650102809A30100351039810810D11DA270000382800700F0006600000C1800098
// -- -- 196408000200C1060101100000030510810D00010280808E100351034010810D11DA2700C51000E70102809A30100351034010810D11DA2700420110650102809A30100351039810810D11DA27000038280070000006600000C1800089
// -- vv 196408000200C0060101100000030510810D000102807F8E100451034010810D11DA2700C51000E70102809A30100351034010810D11DA2700420110650102809A30100351039810810D11DA2700003828007F000006600000C1800098
// -- -- 196408000200C0060101100000030510810D000102807F8E100251034010810D11DA2700C51000E70102809A30100351034010810D11DA2700420110650102809A30100351039810810D11DA27000038280070000006600000C1800089
// -- vv 196408000200C0060101100000030510810D00010280808E100151034010810D11DA2700C51000E70102809A30100251034010810D11DA2700420110650102809A30100251039810810D11DA2700003828007F000006600000C1800098
// -- -- 196408000200C0060101100000030510810D000102807F8E100351034010810D11DA2700C51000E70102809A30100251034010810D11DA2700420110650102809A30100251039810810D11DA27000038280070000006600000C1800089
// -- vv 196408000200C1060101100000030510810D00010280808E100351034010810D11DA2700C51000E70102809A30100451034010810D11DA2700420110650102809B30100351039810810D11DA2700003828007F0F0006600000C18000A7
// vh vv 196408000200C1060101100000030510810D00010280808E100351034010810D11DA2700C51000E70102809B30100451034010810D11DA2700420110650102809B30100351039810810D11DA2700003828007F000006600000C1800098
// -- vv 196408000200C0060101100000030510810D000102807F8E100351034010810D11DA2700C51000E70102809A30100251034010810D11DA2700420110650102809B30100351039810810D11DA2700003828007F0F0006600000C18000A7
// vh -- 196408000200C1060101100000030510810D00010280808E100351034010810D11DA2700C51000E70102809B30100451034010810D11DA2700420210660102809B30100451039810810D11DA270000382800700F0006600000C1800098
// cool fan5 20
// on  196408000200C0060101100000030510810D00010280818E100351034010810D11DA2700C51000E70102809C30100351034010810D11DA27004209106D0102809B30100351039810810D11DA27000039280070000006600000C180008A
// off 196408000200C1060101100000030510810D00010280808E100351034010810D11DA2700C51000E70102809C30100351034010810D11DA27004209106D0102809C30100451039810810D11DA27000038280070000006600000C1800089
// on  196408000200C1060101100000030510810D00010280818E100351034010810D11DA2700C51000E70102809C30100451034010810D11DA27004209106D0102809C30100451039810810D11DA27000039280070000006600000C180008A
// off 196408000200C1060101100000030510810D00010280818E100351034010810D11DA2700C51000E70102809C30100351034010810D11DA27004209106D0102809C30100251039810810D11DA27000038280070000006600000C1800089
// on  196408000200C1060101100000030510810D00010280818E100451034010810D11DA2700C51000E70102809C30100451034010810D11DA27004209106D0102809B30100451039810810D11DA27000039280070000006600000C180008A
// off 196408000200C1060101100000030510810D00010280818E100351034010810D11DA2700C51000E70102809C30100251034010810D11DA27004209106D0102809C30100451039810810D11DA27000038280070000006600000C1800089
// on  196408000200C1060101100000030510810D00010280818E100251034010810D11DA2700C51000E70102809C30100351034010810D11DA27004209106D0102809C30100451039810810D11DA27000039280070000006600000C180008A
// off 196408000200C0060101100000030510810D00010280818E100451034010810D11DA2700C51000E70102809C30100351034010810D11DA27004209106D0102809B30100351039810810D11DA27000038280070000006600000C1800089


// on cool fanA 19 196408000200C1060101100000030510810D00010280848E100451034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427D3C0D010280A130100451039810810D11DA270000392600A0000006600000C18000B8
// on cool fanA 20 196408000200C1060101100000030510810D00010280848E100451034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427D3C0D010280A130100451039810810D11DA270000392800A0000006600000C18000BA
// on cool fanA 21 196408000200C1060101100000030510810D00010280858E100451034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427D3C0D010280A130100451039810810D11DA270000392A00A0000006600000C18000BC
// on cool fanA 22 196408000200C1060101100000030510810D00010280858E100451034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427D3C0D010280A130100451039810810D11DA270000392C00A0000006600000C18000BE
// on cool fanA 23 196408000200C1060101100000030510810D00010280848E100451034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427D3C0D010280A130100451039810810D11DA270000392E00A0000006600000C18000C0
// on cool fanA 24 196408000200C1060101100000030510810D00010280848E100451034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427D3C0D010280A130100451039810810D11DA270000393000A0000006600000C18000C2
// on cool fanA 25 196408000200C1060101100000030510810D00010280858E100451034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427D3C0D010280A130100451039810810D11DA270000393200A0000006600000C18000C4
// on cool fanA 26 196408000200C1060101100000030510810D00010280858E100351034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427D3C0D010280A130100451039810810D11DA270000393400A0000006600000C18000C6
// on cool fanA 27 196408000200C1060101100000030510810D00010280858E100451034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427D3C0D010280A130100451039810810D11DA270000393600A0000006600000C18000C8
// on cool fanA 28 196408000200C1060101100000030510810D00010280858E100351034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427D3C0D010280A130100451039810810D11DA270000393800A0000006600000C18000CA
// on cool fanA 29 196408000200C1060101100000030510810D00010280858E100351034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427D3C0D010280A130100451039810810D11DA270000393A00A0000006600000C18000CC
// on cool fanA 30 196408000200C1060101100000030510810D00010280848E100451034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427E3C0E010280A130100451039810810D11DA270000393C00A0000006600000C18000CE
// on cool fanA 31 196408000200C1060101100000030510810D00010280858E100451034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427E3C0E010280A130100351039810810D11DA270000393E00A0000006600000C18000D0
// on cool fanA 32 196408000200C1060101100000030510810D00010280858E100451034010810D11DA2700C51000E7010280A130100451034010810D11DA2700427E3C0E010280A230100451039810810D11DA270000394000A0000006600000C18000D2